<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WinGo - FORTUNE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            background: #0f3460;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        /* Header dengan logo dan notifikasi bergerak */
        .header {
            background: linear-gradient(90deg, #e94560 0%, #0f3460 100%);
            padding: 15px;
            text-align: center;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Logo PNG */
        .logo-img {
            height: 150px;
            width: auto;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        /* Tombol toggle popup dengan ikon mata di pojok kiri atas */
        .toggle-popup-btn {
            position: absolute;
            left: 80px;
            top: 143%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 100;
        }
        
        .toggle-popup-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }
        
        .eye-icon {
            width: 20px;
            height: 20px;
            position: relative;
        }
        
        .eye-icon .eye-open {
            display: block;
        }
        
        .eye-icon .eye-closed {
            display: none;
        }
        
        .toggle-popup-btn.active .eye-icon .eye-open {
            display: none;
        }
        
        .toggle-popup-btn.active .eye-icon .eye-closed {
            display: block;
        }
        
        .toggle-popup-btn.active {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 300px;
            width: 90%;
            animation: fadeInOut 3s ease-in-out;
            opacity: 0;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            10%, 90% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        .toast-icon {
            font-size: 20px;
        }
        
        .toast-success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            border-color: #00ffcc;
        }
        
        .toast-error {
            background: linear-gradient(135deg, #e94560 0%, #c44569 100%);
            border-color: #ff4757;
        }
        
        .toast-warning {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            border-color: #ffa502;
        }
        
        .toast-message {
            flex: 1;
            font-size: 14px;
        }
        
        /* Pemberitahuan bergerak */
        .notification-bar {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 0;
            overflow: hidden;
            position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .notification-content {
            display: inline-block;
            white-space: nowrap;
            padding-left: 100%;
            animation: scrollText 25s linear infinite;
        }
        
        @keyframes scrollText {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        
        .notification-content span {
            color: #ffd700;
            font-weight: bold;
            margin-right: 30px;
        }
        
        /* Saldo Section */
        .saldo-section {
            padding: 15px;
            background: #1a1a2e;
            margin: 10px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #e94560;
        }
        
        .saldo-label {
            font-size: 14px;
            color: #8f9bb3;
        }
        
        .saldo-value {
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        /* Timer Section */
        .timer-section {
            margin: 10px;
            background: #1a1a2e;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid #2d3746;
        }
        
        .timer-tabs {
            display: flex;
        }
        
        .timer-tab {
            flex: 1;
            padding: 15px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: #8f9bb3;
            background: #2d3436;
            border-bottom: 3px solid transparent;
        }
        
        .timer-tab.active {
            background: #1a1a2e;
            color: white;
            border-bottom-color: #e94560;
        }
        
        .timer-display-container {
            padding: 20px;
            text-align: center;
        }
        
        .timer-display {
            font-size: 48px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-block;
            letter-spacing: 3px;
        }
        
        .periode-display {
            margin-top: 10px;
            font-size: 18px;
            color: #ffd700;
        }
        
        /* Bet Section - Layout baru sesuai gambar */
        .bet-section {
            margin: 10px;
            background: #1a1a2e;
            border-radius: 15px;
            padding: 15px;
            border: 1px solid #2d3746;
        }
        
        .bet-section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            color: white;
        }
        
        /* Tombol warna dalam 1 baris */
        .warna-buttons-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        /* Angka Grid dalam 2 baris 5 kolom dengan tombol toggle di bawah angka 7 */
        .angka-grid-lima-kolom {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .angka-btn {
            padding: 20px 5px;
            border-radius: 10px;
            background: #2d3436;
            color: white;
            font-weight: bold;
            font-size: 20px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .angka-btn:hover {
            background: #3d4446;
            transform: scale(1.05);
        }
        
        .angka-btn.active {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            box-shadow: 0 0 10px rgba(0, 184, 148, 0.5);
        }
        
        /* Tombol toggle kombinasi di bawah angka 7 */
        .toggle-kombinasi-btn {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3436;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }
        
        .toggle-kombinasi-btn:hover {
            background: #3d4446;
            transform: translateX(-50%) scale(1.1);
        }
        
        .toggle-kombinasi-btn i {
            font-size: 16px;
            color: #8f9bb3;
            transition: transform 0.3s;
        }
        
        .toggle-kombinasi-btn.collapsed i {
            transform: rotate(180deg);
        }
        
        /* Grid untuk KH KM BM BH - bisa disembunyikan */
        .kombinasi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            max-height: 200px;
            overflow: hidden;
        }
        
        .kombinasi-grid.collapsed {
            max-height: 0;
            margin-bottom: 0;
            opacity: 0;
            pointer-events: none;
        }
        
        /* Grid untuk KECIL BESAR */
        .kecil-besar-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        /* Bet Buttons */
        .bet-button {
            padding: 15px 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .bet-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .bet-button.active {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }
        
        /* Warna untuk bet button */
        .bet-hijau {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }
        
        .bet-ungu {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
        }
        
        .bet-merah {
            background: linear-gradient(135deg, #e94560 0%, #ff6b8b 100%);
            color: white;
        }
        
        .bet-kecil {
            background: linear-gradient(135deg, #0984e3 0%, #74b9ff 100%);
            color: white;
        }
        
        .bet-besar {
            background: linear-gradient(135deg, #fdcb6e 0%, #ffeaa7 100%);
            color: #333;
        }
        
        /* KH, KM, BM, BH dengan warna split */
        .bet-kh {
            background: linear-gradient(to right, #0984e3 50%, #00b894 50%);
            color: white;
        }
        
        .bet-km {
            background: linear-gradient(to right, #0984e3 50%, #e94560 50%);
            color: white;
        }
        
        .bet-bm {
            background: linear-gradient(to right, #fdcb6e 50%, #e94560 50%);
            color: #333;
        }
        
        .bet-bh {
            background: linear-gradient(to right, #fdcb6e 50%, #00b894 50%);
            color: #333;
        }
        
        .bet-button-text {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .bet-button-multiplier {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* History Section */
        .history-section {
            margin: 10px;
            background: #1a1a2e;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 80px;
            border: 1px solid #2d3746;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2d3746;
        }
        
        .history-title {
            font-size: 18px;
            font-weight: bold;
            color: white;
        }
        
        .history-time {
            font-size: 14px;
            color: #8f9bb3;
        }
        
        .history-tabs {
            display: flex;
            background: #2d3436;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .history-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            color: #8f9bb3;
            transition: all 0.3s;
        }
        
        .history-tab.active {
            background: #e94560;
            color: white;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .history-table th {
            padding: 12px 8px;
            text-align: center;
            font-size: 12px;
            color: #8f9bb3;
            font-weight: normal;
            border-bottom: 1px solid #2d3746;
        }
        
        .history-table td {
            padding: 12px 8px;
            text-align: center;
            font-size: 14px;
            border-bottom: 1px solid #2d3746;
        }
        
        /* Indikator warna untuk hasil riwayat */
        .color-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .dot-hijau {
            background-color: #00b894;
            box-shadow: 0 0 5px rgba(0, 184, 148, 0.5);
        }
        
        .dot-ungu {
            background-color: #a29bfe;
            box-shadow: 0 0 5px rgba(162, 155, 254, 0.5);
        }
        
        .dot-merah {
            background-color: #e94560;
            box-shadow: 0 0 5px rgba(233, 69, 96, 0.5);
        }
        
        .size-text {
            font-weight: bold;
        }
        
        .size-kecil {
            color: #74b9ff;
        }
        
        .size-besar {
            color: #fdcb6e;
        }
        
        .profit {
            color: #00ff88;
        }
        
        .loss {
            color: #ff4444;
        }
        
        .waiting {
            color: #ffd700;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 20px);
            max-width: 480px;
            background: #1a1a2e;
            border-radius: 15px;
            display: flex;
            justify-content: space-around;
            padding: 15px;
            z-index: 1000;
            border: 1px solid #2d3746;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            color: #8f9bb3;
            transition: all 0.3s;
        }
        
        .nav-item.active {
            color: #e94560;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .nav-text {
            font-size: 12px;
        }
        
        /* Popup Bet Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-content {
            background: #1a1a2e;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            padding: 25px;
            text-align: center;
            border: 2px solid #e94560;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 20px;
        }
        
        .modal-message {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #fff;
        }
        
        .modal-bet-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .modal-bet-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .modal-bet-label {
            color: #8f9bb3;
        }
        
        .modal-bet-value {
            color: white;
            font-weight: bold;
        }
        
        /* Bet Amount Controls */
        .bet-amount-controls {
            margin: 20px 0;
        }
        
        .amount-presets {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .amount-preset {
            padding: 12px 5px;
            border-radius: 8px;
            background: #2d3436;
            color: white;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .amount-preset:hover {
            background: #3d4446;
        }
        
        .amount-preset.active {
            background: #e94560;
            border-color: #ff6b8b;
            color: white;
        }
        
        .amount-preset.all-preset {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
        }
        
        .amount-preset.all-preset.active {
            background: linear-gradient(135deg, #5a4fcf 0%, #928af5 100%);
            border-color: #a29bfe;
        }
        
        .amount-input-container {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .amount-input {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            background: #2d3436;
            border: 2px solid #3d4446;
            color: white;
            font-size: 16px;
            text-align: center;
        }
        
        .amount-input:focus {
            outline: none;
            border-color: #0984e3;
            background: #3d4446;
        }
        
        .amount-input:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #2d3436;
        }
        
        .amount-input.editable {
            background: #3d4446;
            border-color: #0984e3;
            cursor: text;
        }
        
        .amount-set-btn {
            padding: 12px 20px;
            border-radius: 8px;
            background: #0984e3;
            color: white;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .amount-set-btn:hover {
            background: #74b9ff;
        }
        
        .amount-set-btn:disabled {
            background: #636e72;
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .amount-set-btn.active {
            background: #00b894;
        }
        
        .modal-bet-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .modal-bet-label {
            color: #8f9bb3;
        }
        
        .modal-bet-value {
            color: white;
            font-weight: bold;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        
        .modal-btn.cancel {
            background: #636e72;
            color: white;
        }
        
        .modal-btn.confirm {
            background: linear-gradient(90deg, #00b894 0%, #00cec9 100%);
            color: white;
        }
        
        .modal-btn.confirm:disabled {
            background: #636e72;
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Result Modal */
        .result-modal-content {
            background: #1a1a2e;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            padding: 25px;
            text-align: center;
            border: 2px solid #00b894;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .result-title {
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 20px;
        }
        
        .result-number {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            color: #ffd700;
        }
        
        .result-type {
            font-size: 20px;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .result-bet-status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            text-align: left;
        }
        
        .betting-closed {
            opacity: 0.6;
            pointer-events: none;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .container {
                border-radius: 15px;
            }
            
            .timer-display {
                font-size: 40px;
            }
            
            .bet-button {
                padding: 12px 5px;
                min-height: 55px;
            }
            
            .bet-button-text {
                font-size: 14px;
            }
            
            .angka-btn {
                padding: 15px 5px;
                font-size: 18px;
            }
            
            .kombinasi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .toast {
                max-width: 280px;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header dengan logo dan tombol toggle popup -->
        <div class="header">
            <button class="toggle-popup-btn" id="togglePopupBtn" title="Toggle Popup Hasil">
                <div class="eye-icon">
                    <svg class="eye-open" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 4C5 4 1 12 1 12C1 12 5 20 12 20C19 20 23 12 23 12C23 12 19 4 12 4Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg class="eye-closed" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.94 17.94C16.23 19.24 14.21 20 12 20C5 20 1 12 1 12C1 12 2.55 8.55 5.84 6.15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9.9 4.24C10.58 4.08 11.29 4 12 4C19 4 23 12 23 12C23 12 22.28 13.7 20.86 15.32" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M1 1L23 23" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </button>
            
            <div class="logo-container">
                <!-- Logo PNG - pastikan file logo.png ada di folder yang sama -->
                <img src="logo.png" class="logo-img" alt="WinGo Logo">
            </div>
        </div>
        
        <!-- Pemberitahuan bergerak -->
        <div class="notification-bar">
            <div class="notification-content">
                <span>üéâ Welcome to WinGo! Taruhan aman & terpercaya üéâ</span>
                <span>üí∞ Bonus deposit 10% untuk member baru! üí∞</span>
                <span>‚ö° Super cepat - Cepat - Standar ‚ö°</span>
                <span>üéØ Tebak angka, warna, atau kombinasi! üéØ</span>
            </div>
        </div>
        
        <!-- Saldo -->
        <div class="saldo-section">
            <div class="saldo-label">SALDO</div>
            <div class="saldo-value" id="saldoValue">100,000</div>
        </div>
        
        <!-- Timer Section -->
        <div class="timer-section">
            <div class="timer-tabs">
                <div class="timer-tab active" data-mode="supercepat">SILVER</div>
                <div class="timer-tab" data-mode="cepat">GOLD</div>
                <div class="timer-tab" data-mode="standar">BLACK</div>
            </div>
            
            <div class="timer-display-container">
                <div class="timer-display" id="timerDisplay">00:30</div>
                <div class="periode-display">Periode: <span id="currentPeriod">2025120900</span></div>
            </div>
        </div>
        
        <!-- Bet Section - Layout baru -->
        <div class="bet-section">
            <div class="bet-section-title">PILIH JENIS TARUHAN</div>
            
            <!-- Tombol taruhan warna MERAH HIJAU UNGU -->
            <div class="warna-buttons-row">
                <div class="bet-button bet-merah" data-bet="merah">
                    <div class="bet-button-text">MERAH</div>
                    <div class="bet-button-multiplier">x2.0 / x1.5</div>
                </div>
                <div class="bet-button bet-ungu" data-bet="ungu">
                    <div class="bet-button-text">UNGU</div>
                    <div class="bet-button-multiplier">x4.5</div>
                </div>
                <div class="bet-button bet-hijau" data-bet="hijau">
                    <div class="bet-button-text">HIJAU</div>
                    <div class="bet-button-multiplier">x2.0 / x1.5</div>
                </div>
            </div>
            
            <!-- Angka Grid 5 kolom dengan tombol toggle -->
            <div class="angka-grid-lima-kolom">
                <div class="angka-btn" data-number="0">0</div>
                <div class="angka-btn" data-number="1">1</div>
                <div class="angka-btn" data-number="2">2</div>
                <div class="angka-btn" data-number="3">3</div>
                <div class="angka-btn" data-number="4">4</div>
                <div class="angka-btn" data-number="5">5</div>
                <div class="angka-btn" data-number="6">6</div>
                <div class="angka-btn" data-number="7">7</div>
                <div class="angka-btn" data-number="8">8</div>
                <div class="angka-btn" data-number="9">9</div>
                
                <!-- Tombol toggle kombinasi di bawah angka 7 -->
                <button class="toggle-kombinasi-btn" id="toggleKombinasiBtn" title="Sembunyikan/Tampilkan Kombinasi">
                    <i>‚ñº</i>
                </button>
            </div>
            
            <!-- Grid untuk KH KM BM BH -->
            <div class="kombinasi-grid" id="kombinasiGrid">
                <div class="bet-button bet-kh" data-bet="kecil-hijau">
                    <div class="bet-button-text">K/H</div>
                    <div class="bet-button-multiplier">x4.5</div>
                </div>
                <div class="bet-button bet-km" data-bet="kecil-merah">
                    <div class="bet-button-text">K/M</div>
                    <div class="bet-button-multiplier">x3.0</div>
                </div>
                <div class="bet-button bet-bm" data-bet="besar-merah">
                    <div class="bet-button-text">B/M</div>
                    <div class="bet-button-multiplier">x4.5</div>
                </div>
                <div class="bet-button bet-bh" data-bet="besar-hijau">
                    <div class="bet-button-text">B/H</div>
                    <div class="bet-button-multiplier">x3.0</div>
                </div>
            </div>
            
            <!-- Grid untuk KECIL BESAR -->
            <div class="kecil-besar-grid">
                <div class="bet-button bet-kecil" data-bet="kecil">
                    <div class="bet-button-text">KECIL</div>
                    <div class="bet-button-multiplier">x2.0</div>
                </div>
                <div class="bet-button bet-besar" data-bet="besar">
                    <div class="bet-button-text">BESAR</div>
                    <div class="bet-button-multiplier">x2.0</div>
                </div>
            </div>
        </div>
        
        <!-- History Section -->
        <div class="history-section">
            <div class="history-header">
                <div class="history-title">RIWAYAT</div>
                <div class="history-time" id="currentTime">09:04</div>
            </div>
            
            <div class="history-tabs">
                <div class="history-tab active" data-history="hasil">HASIL</div>
                <div class="history-tab" data-history="saya">RIWAYAT SAYA</div>
            </div>
            
            <table class="history-table" id="historyTable">
                <thead>
                    <tr>
                        <th>PERIODE</th>
                        <th>HASIL</th>
                        <th>JENIS</th>
                        <th>STATUS</th>
                    </tr>
                </thead>
                <tbody id="historyBody">
                    <!-- Riwayat akan diisi oleh JavaScript -->
                </tbody>
            </table>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active">
                <div class="nav-icon">üè†</div>
                <div class="nav-text">Beranda</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üéÆ</div>
                <div class="nav-text">Games</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üìä</div>
                <div class="nav-text">Aktivitas</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üë§</div>
                <div class="nav-text">Akun</div>
            </div>
        </div>
    </div>
    
    <!-- Bet Modal (Popup saat klik taruhan) -->
    <div class="modal" id="betModal">
        <div class="modal-content">
            <div class="modal-title">PASANG TARUHAN</div>
            
            <div class="modal-bet-info">
                <div class="modal-bet-row">
                    <div class="modal-bet-label">Jenis Taruhan:</div>
                    <div class="modal-bet-value" id="modalBetType">HIJAU</div>
                </div>
                <div class="modal-bet-row">
                    <div class="modal-bet-label">Mode:</div>
                    <div class="modal-bet-value" id="modalGameMode">Super Cepat</div>
                </div>
                <div class="modal-bet-row">
                    <div class="modal-bet-label">Periode:</div>
                    <div class="modal-bet-value" id="modalPeriod">2025120900</div>
                </div>
                <div class="modal-bet-row">
                    <div class="modal-bet-label">Multiplier:</div>
                    <div class="modal-bet-value" id="modalMultiplier">x2.0</div>
                </div>
                <div class="modal-bet-row">
                    <div class="modal-bet-label">Biaya Layanan (2%):</div>
                    <div class="modal-bet-value" id="modalFee">20</div>
                </div>
            </div>
            
            <div class="bet-amount-controls">
                <div class="amount-presets">
                    <div class="amount-preset" data-amount="1000">1,000</div>
                    <div class="amount-preset" data-amount="5000">5,000</div>
                    <div class="amount-preset" data-amount="10000">10,000</div>
                    <div class="amount-preset" data-amount="50000">50,000</div>
                    <div class="amount-preset all-preset" data-amount="all">ALL</div>
                </div>
                
                <div class="amount-input-container">
                    <input type="number" class="amount-input" id="amountInput" value="1000" min="1000" max="100000" placeholder="Klik SET untuk mengedit" disabled>
                    <button class="amount-set-btn" id="setAmountBtn">SET</button>
                </div>
                
                <div class="modal-bet-row" style="margin-top: 15px;">
                    <div class="modal-bet-label">Potensi Menang:</div>
                    <div class="modal-bet-value" id="modalPotentialWin">2,000</div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="modalCancelBtn">BATAL</button>
                <button class="modal-btn confirm" id="modalConfirmBtn" disabled>KONFIRMASI</button>
            </div>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="modal" id="resultModal">
        <div class="result-modal-content">
            <div class="result-title">HASIL PERIODE</div>
            <div class="modal-message">
                <div style="margin-bottom: 10px;">
                    Periode <span id="resultPeriod" style="color: #ffd700;">2025120900</span><br>
                    Mode: <span id="resultMode" style="color: #00cec9;">Super Cepat</span>
                </div>
                <div class="result-number" id="resultNumber">8</div>
                <div class="result-type" id="resultType">MERAH - BESAR</div>
            </div>
            <div id="resultBetStatus" class="result-bet-status">
                <!-- Status taruhan akan ditampilkan di sini -->
            </div>
            <div class="modal-buttons">
                <button class="modal-btn confirm" id="modalOkBtn">OK</button>
            </div>
        </div>
    </div>

    <script>
        // Data Game
        let gameData = {
            saldo: 100000,
            currentBet: {
                type: null,
                amount: 1000,
                mode: 'supercepat',
                number: null,
                customAmountSet: false,
                isAllNumbers: false,
                isManualInput: false // Flag untuk input manual
            },
            gameModes: {
                supercepat: {
                    name: 'Super Cepat',
                    timer: 30,
                    currentTime: 30,
                    periodPrefix: '20251209',
                    periodNumber: 0,
                    currentPeriod: '2025120900',
                    history: [],
                    bettingOpen: true,
                    intervalId: null,
                    lastResultPeriod: null
                },
                cepat: {
                    name: 'Cepat',
                    timer: 60,
                    currentTime: 60,
                    periodPrefix: '20251209',
                    periodNumber: 0,
                    currentPeriod: '2025120900',
                    history: [],
                    bettingOpen: true,
                    intervalId: null,
                    lastResultPeriod: null
                },
                standar: {
                    name: 'Standar',
                    timer: 180,
                    currentTime: 180,
                    periodPrefix: '20251209',
                    periodNumber: 0,
                    currentPeriod: '2025120900',
                    history: [],
                    bettingOpen: true,
                    intervalId: null,
                    lastResultPeriod: null
                }
            },
            currentMode: 'supercepat',
            myBets: [],
            pendingBets: [],
            showResultModal: true,
            showKombinasi: true
        };

        // Multiplier untuk setiap jenis taruhan
        const betMultipliers = {
            'hijau': 2.0,
            'ungu': 4.5,
            'merah': 2.0,
            'kecil': 2.0,
            'besar': 2.0,
            'kecil-merah': 3.0,
            'kecil-hijau': 4.5,
            'besar-merah': 4.5,
            'besar-hijau': 3.0,
            'nomor': 9.0
        };

        // Multiplier khusus untuk Hijau/Merah saat hasil Ungu (1.5x)
        const specialMultipliers = {
            'hijau': 1.5,
            'merah': 1.5
        };

        // Angka untuk setiap jenis taruhan
        const betNumbers = {
            'hijau': [1, 3, 5, 7, 9],
            'ungu': [0, 5],
            'merah': [0, 2, 4, 6, 8],
            'kecil': [0, 1, 2, 3, 4],
            'besar': [5, 6, 7, 8, 9],
            'kecil-merah': [0, 2, 4],
            'kecil-hijau': [1, 3],
            'besar-merah': [6, 8],
            'besar-hijau': [5, 7, 9]
        };

        // Fungsi untuk menampilkan toast notification
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ö†Ô∏è'}</div>
                <div class="toast-message">${message}</div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Inisialisasi halaman
        function initPage() {
            setupEventListeners();
            initDisplay();
            loadFromLocalStorage();
            updateCurrentTime();
            startTimers();
            generateInitialHistory();
            updateResultHistory();
            
            initToggleButtons();
        }

        function initToggleButtons() {
            const togglePopupBtn = document.getElementById('togglePopupBtn');
            if (gameData.showResultModal) {
                togglePopupBtn.classList.add('active');
            }
            
            const toggleKombinasiBtn = document.getElementById('toggleKombinasiBtn');
            if (!gameData.showKombinasi) {
                toggleKombinasiBtn.classList.add('collapsed');
                document.getElementById('kombinasiGrid').classList.add('collapsed');
            }
        }

        function setupEventListeners() {
            // Tombol toggle popup hasil
            document.getElementById('togglePopupBtn').addEventListener('click', function() {
                gameData.showResultModal = !gameData.showResultModal;
                if (gameData.showResultModal) {
                    this.classList.add('active');
                } else {
                    this.classList.remove('active');
                }
                saveToLocalStorage();
            });
            
            // Tombol toggle kombinasi
            document.getElementById('toggleKombinasiBtn').addEventListener('click', function() {
                gameData.showKombinasi = !gameData.showKombinasi;
                const kombinasiGrid = document.getElementById('kombinasiGrid');
                
                if (gameData.showKombinasi) {
                    kombinasiGrid.classList.remove('collapsed');
                    this.classList.remove('collapsed');
                } else {
                    kombinasiGrid.classList.add('collapsed');
                    this.classList.add('collapsed');
                }
                saveToLocalStorage();
            });
            
            document.querySelectorAll('.timer-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchGameMode(this.dataset.mode);
                });
            });
            
            document.querySelectorAll('.bet-button').forEach(button => {
                button.addEventListener('click', function() {
                    const mode = gameData.gameModes[gameData.currentMode];
                    if (!mode.bettingOpen) {
                        showToast('Taruhan sudah ditutup! Tunggu periode berikutnya.', 'error');
                        return;
                    }
                    const betType = this.dataset.bet;
                    showBetModal(betType);
                });
            });
            
            document.querySelectorAll('.angka-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = gameData.gameModes[gameData.currentMode];
                    if (!mode.bettingOpen) {
                        showToast('Taruhan sudah ditutup! Tunggu periode berikutnya.', 'error');
                        return;
                    }
                    const number = parseInt(this.dataset.number);
                    showBetModal('nomor', number);
                });
            });
            
            // Event listener untuk preset amount
            document.querySelectorAll('.amount-preset').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectBetAmount(this.dataset.amount);
                });
            });
            
            // Event listener untuk tombol SET
            document.getElementById('setAmountBtn').addEventListener('click', function() {
                // Aktifkan input manual
                enableManualInput();
            });
            
            // Event listener untuk input manual (untuk validasi real-time)
            document.getElementById('amountInput').addEventListener('input', function() {
                // Validasi input manual
                validateManualInput();
            });
            
            document.getElementById('modalCancelBtn').addEventListener('click', function() {
                document.getElementById('betModal').style.display = 'none';
                resetModalState();
            });
            
            document.getElementById('modalConfirmBtn').addEventListener('click', placeBet);
            document.getElementById('modalOkBtn').addEventListener('click', function() {
                document.getElementById('resultModal').style.display = 'none';
            });
            
            document.querySelectorAll('.history-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchHistoryTab(this.dataset.history);
                });
            });
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        function enableManualInput() {
            const amountInput = document.getElementById('amountInput');
            
            // Aktifkan input
            amountInput.disabled = false;
            amountInput.classList.add('editable');
            amountInput.focus();
            amountInput.select();
            
            // Set flag untuk input manual
            gameData.currentBet.isManualInput = true;
            
            // Reset preset amount yang aktif
            document.querySelectorAll('.amount-preset').forEach(preset => {
                preset.classList.remove('active');
            });
            
            // Update UI
            document.getElementById('setAmountBtn').classList.add('active');
            document.getElementById('setAmountBtn').textContent = 'EDIT';
            
            // Nonaktifkan tombol konfirmasi sampai input valid
            document.getElementById('modalConfirmBtn').disabled = true;
            
            // Update perhitungan potensi menang
            validateManualInput();
        }

        function validateManualInput() {
            const amountInput = document.getElementById('amountInput');
            const amount = parseInt(amountInput.value);
            
            // Reset tombol konfirmasi
            document.getElementById('modalConfirmBtn').disabled = true;
            
            // Validasi dasar
            if (isNaN(amount) || amount < 1000) {
                return;
            }
            
            if (amount > gameData.saldo) {
                return;
            }
            
            if (amount > 100000) {
                return;
            }
            
            // Jika valid, aktifkan tombol konfirmasi
            document.getElementById('modalConfirmBtn').disabled = false;
            
            // Update amount di gameData
            gameData.currentBet.amount = amount;
            gameData.currentBet.customAmountSet = true;
            
            // Update perhitungan
            const multiplier = gameData.currentBet.type === 'nomor' ? 9.0 : 
                              (betMultipliers[gameData.currentBet.type] || 1);
            updateBetModalInfo(multiplier);
        }

        function initDisplay() {
            updateSaldo();
            updateTimerDisplay();
            updatePeriodDisplay();
            updateAmountPresets();
        }

        function switchGameMode(mode) {
            document.querySelectorAll('.timer-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.timer-tab[data-mode="${mode}"]`).classList.add('active');
            
            gameData.currentMode = mode;
            updateTimerDisplay();
            updatePeriodDisplay();
            updateResultHistory();
            updateBettingButtonStatus();
        }

        function showBetModal(betType, number = null) {
            const mode = gameData.gameModes[gameData.currentMode];
            
            // Reset state
            gameData.currentBet.type = betType;
            gameData.currentBet.mode = gameData.currentMode;
            gameData.currentBet.number = number;
            gameData.currentBet.customAmountSet = false;
            gameData.currentBet.isAllNumbers = false;
            gameData.currentBet.isManualInput = false;
            gameData.currentBet.amount = 1000;
            
            // Update tampilan modal
            document.getElementById('modalBetType').textContent = getBetDisplayName(betType, number);
            document.getElementById('modalGameMode').textContent = mode.name;
            document.getElementById('modalPeriod').textContent = mode.currentPeriod;
            
            const multiplier = betType === 'nomor' ? 9.0 : (betMultipliers[betType] || 1);
            document.getElementById('modalMultiplier').textContent = `x${multiplier}`;
            
            // Reset input dan tombol
            document.getElementById('amountInput').value = '1000';
            document.getElementById('amountInput').disabled = true;
            document.getElementById('amountInput').classList.remove('editable');
            document.getElementById('amountInput').placeholder = 'Klik SET untuk mengedit';
            
            document.getElementById('setAmountBtn').textContent = 'SET';
            document.getElementById('setAmountBtn').classList.remove('active');
            document.getElementById('modalConfirmBtn').disabled = true;
            
            // Update preset amount
            updateAmountPresets();
            updateBetModalInfo(multiplier);
            
            // Tampilkan modal
            document.getElementById('betModal').style.display = 'flex';
        }

        function getBetDisplayName(betType, number = null) {
            const names = {
                'hijau': 'HIJAU',
                'ungu': 'UNGU',
                'merah': 'MERAH',
                'kecil': 'KECIL',
                'besar': 'BESAR',
                'kecil-merah': 'KECIL & MERAH',
                'kecil-hijau': 'KECIL & HIJAU',
                'besar-merah': 'BESAR & MERAH',
                'besar-hijau': 'BESAR & HIJAU',
                'nomor': `TEBAK NOMOR ${number}`
            };
            return names[betType] || betType.toUpperCase();
        }

        function selectBetAmount(amount) {
            if (amount === 'all') {
                // Jika pilih ALL, gunakan semua saldo
                gameData.currentBet.amount = gameData.saldo;
                document.getElementById('amountInput').value = gameData.saldo;
            } else {
                const amountNum = parseInt(amount);
                if (amountNum > gameData.saldo) {
                    showToast('Saldo tidak cukup!', 'error');
                    return;
                }
                gameData.currentBet.amount = amountNum;
                document.getElementById('amountInput').value = amountNum;
            }
            
            // Nonaktifkan input manual (karena pilih preset)
            document.getElementById('amountInput').disabled = true;
            document.getElementById('amountInput').classList.remove('editable');
            gameData.currentBet.isManualInput = false;
            
            // Update tombol SET
            document.getElementById('setAmountBtn').classList.remove('active');
            document.getElementById('setAmountBtn').textContent = 'SET';
            
            updateAmountPresets();
            
            // Aktifkan tombol konfirmasi karena menggunakan preset
            gameData.currentBet.customAmountSet = true;
            document.getElementById('modalConfirmBtn').disabled = false;
            
            const multiplier = gameData.currentBet.type === 'nomor' ? 9.0 : 
                              (betMultipliers[gameData.currentBet.type] || 1);
            updateBetModalInfo(multiplier);
        }

        function updateAmountPresets() {
            document.querySelectorAll('.amount-preset').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.amount === 'all' && gameData.currentBet.amount === gameData.saldo) {
                    btn.classList.add('active');
                } else if (parseInt(btn.dataset.amount) === gameData.currentBet.amount) {
                    btn.classList.add('active');
                }
            });
        }

        function updateBetModalInfo(multiplier) {
            const fee = Math.floor(gameData.currentBet.amount * 0.02);
            const contractAmount = gameData.currentBet.amount - fee;
            const potentialWin = Math.floor(contractAmount * multiplier);
            
            document.getElementById('modalFee').textContent = fee.toLocaleString();
            document.getElementById('modalPotentialWin').textContent = potentialWin.toLocaleString();
        }

        function placeBet() {
            const mode = gameData.gameModes[gameData.currentMode];
            
            // Pastikan amount sudah diset (baik preset maupun manual)
            if (!gameData.currentBet.customAmountSet) {
                showToast('Silakan set jumlah taruhan terlebih dahulu!', 'error');
                return;
            }
            
            if (gameData.currentBet.amount > gameData.saldo) {
                showToast('Saldo tidak cukup!', 'error');
                return;
            }
            
            if (!mode.bettingOpen) {
                showToast('Taruhan sudah ditutup!', 'error');
                document.getElementById('betModal').style.display = 'none';
                resetModalState();
                return;
            }
            
            const fee = Math.floor(gameData.currentBet.amount * 0.02);
            const contractAmount = gameData.currentBet.amount - fee;
            
            // Buat taruhan
            const bet = {
                id: Date.now(),
                period: mode.currentPeriod,
                mode: gameData.currentMode,
                type: gameData.currentBet.type,
                number: gameData.currentBet.number,
                amount: gameData.currentBet.amount,
                fee: fee,
                contractAmount: contractAmount,
                timestamp: new Date().toLocaleString('id-ID'),
                status: 'waiting',
                result: null,
                profit: 0,
                winAmount: 0,
                multiplier: gameData.currentBet.type === 'nomor' ? 9.0 : (betMultipliers[gameData.currentBet.type] || 1)
            };
            
            // Kurangi saldo
            gameData.saldo -= gameData.currentBet.amount;
            updateSaldo();
            
            // Tambahkan taruhan
            gameData.pendingBets.push(bet);
            gameData.myBets.unshift(bet);
            
            if (document.querySelector('.history-tab.active').dataset.history === 'saya') {
                updateMyBetHistory();
            }
            
            document.getElementById('betModal').style.display = 'none';
            resetModalState();
            saveToLocalStorage();
            
            // Tampilkan toast notification
            showToast(`Taruhan ${gameData.currentBet.amount.toLocaleString()} berhasil ditempatkan pada periode ${mode.currentPeriod}!`, 'success');
        }

        function resetModalState() {
            // Reset semua state modal
            gameData.currentBet.customAmountSet = false;
            gameData.currentBet.isAllNumbers = false;
            gameData.currentBet.isManualInput = false;
            
            document.getElementById('modalConfirmBtn').disabled = true;
            document.getElementById('setAmountBtn').classList.remove('active');
            document.getElementById('setAmountBtn').textContent = 'SET';
            document.getElementById('amountInput').disabled = true;
            document.getElementById('amountInput').classList.remove('editable');
            document.getElementById('amountInput').placeholder = 'Klik SET untuk mengedit';
        }

        function startTimers() {
            for (const modeKey in gameData.gameModes) {
                startTimerForMode(modeKey);
            }
        }

        function startTimerForMode(modeKey) {
            const mode = gameData.gameModes[modeKey];
            
            if (mode.intervalId) {
                clearInterval(mode.intervalId);
            }
            
            mode.intervalId = setInterval(() => {
                mode.currentTime--;
                
                mode.bettingOpen = mode.currentTime > 8;
                
                if (modeKey === gameData.currentMode) {
                    updateTimerDisplay();
                    updateBettingButtonStatus();
                }
                
                if (mode.currentTime <= 0) {
                    generateResult(modeKey);
                    mode.currentTime = mode.timer;
                    mode.bettingOpen = true;
                    
                    if (modeKey === gameData.currentMode) {
                        updateTimerDisplay();
                        updateBettingButtonStatus();
                    }
                }
            }, 1000);
        }

        function updateBettingButtonStatus() {
            const mode = gameData.gameModes[gameData.currentMode];
            const betButtons = document.querySelectorAll('.bet-button, .angka-btn');
            
            if (mode.bettingOpen) {
                betButtons.forEach(btn => {
                    btn.classList.remove('betting-closed');
                    btn.style.opacity = '1';
                    btn.style.pointerEvents = 'auto';
                });
            } else {
                betButtons.forEach(btn => {
                    btn.classList.add('betting-closed');
                    btn.style.opacity = '0.6';
                    btn.style.pointerEvents = 'none';
                });
            }
        }

        function updateTimerDisplay() {
            const mode = gameData.gameModes[gameData.currentMode];
            const minutes = Math.floor(mode.currentTime / 60);
            const seconds = mode.currentTime % 60;
            
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const timerDisplay = document.getElementById('timerDisplay');
            if (mode.currentTime <= 8) {
                timerDisplay.style.color = '#ff4444';
            } else {
                timerDisplay.style.color = '#00ff88';
            }
        }

        function updatePeriodDisplay() {
            const mode = gameData.gameModes[gameData.currentMode];
            let nextPeriodNum = mode.periodNumber;
            if (mode.currentTime <= 8) {
                nextPeriodNum = mode.periodNumber + 0;
                if (nextPeriodNum > 99) nextPeriodNum = 0;
            }
            document.getElementById('currentPeriod').textContent = 
                `${mode.periodPrefix}${nextPeriodNum.toString().padStart(2, '0')}`;
        }

        function updateSaldo() {
            document.getElementById('saldoValue').textContent = gameData.saldo.toLocaleString();
        }

        function updateCurrentTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('currentTime').textContent = `${hours}:${minutes}`;
            setTimeout(updateCurrentTime, 60000);
        }

        function generateResult(modeKey) {
            const mode = gameData.gameModes[modeKey];
            
            const resultNumber = Math.floor(Math.random() * 10);
            
            let resultType = '';
            let resultColor = '';
            
            if (resultNumber === 0 || resultNumber === 5) {
                resultType = 'UNGU';
                resultColor = 'ungu';
            } else if (resultNumber % 2 === 1) {
                resultType = 'HIJAU';
                resultColor = 'hijau';
            } else {
                resultType = 'MERAH';
                resultColor = 'merah';
            }
            
            const resultSize = resultNumber <= 4 ? 'KECIL' : 'BESAR';
            
            mode.lastResultPeriod = mode.currentPeriod;
            
            mode.periodNumber++;
            if (mode.periodNumber > 99) {
                mode.periodNumber = 0;
            }
            
            mode.currentPeriod = `${mode.periodPrefix}${mode.periodNumber.toString().padStart(2, '0')}`;
            
            const result = {
                period: mode.lastResultPeriod,
                number: resultNumber,
                type: resultType,
                size: resultSize,
                color: resultColor,
                mode: modeKey,
                timestamp: new Date().toLocaleString('id-ID')
            };
            
            mode.history.unshift(result);
            
            if (mode.history.length > 20) {
                mode.history.pop();
            }
            
            checkPendingBets(modeKey, result);
            
            if (modeKey === gameData.currentMode) {
                updateResultHistory();
                updatePeriodDisplay();
                
                if (gameData.showResultModal) {
                    showResultModal(mode, result);
                }
            }
            
            saveToLocalStorage();
        }

        function checkPendingBets(modeKey, result) {
            const mode = gameData.gameModes[modeKey];
            const resultPeriod = result.period;
            
            const relevantBets = gameData.pendingBets.filter(bet => 
                bet.mode === modeKey && 
                bet.period === resultPeriod
            );
            
            relevantBets.forEach(bet => {
                let isWin = false;
                let actualMultiplier = bet.multiplier;
                
                if ((bet.type === 'hijau' || bet.type === 'merah') && result.type === 'UNGU') {
                    actualMultiplier = specialMultipliers[bet.type];
                }
                
                if (bet.type === 'hijau') {
                    if (result.type === 'UNGU' && result.number === 5) {
                        isWin = true;
                    } else {
                        isWin = result.type === 'HIJAU';
                    }
                } else if (bet.type === 'ungu') {
                    isWin = result.type === 'UNGU';
                } else if (bet.type === 'merah') {
                    if (result.type === 'UNGU' && result.number === 0) {
                        isWin = true;
                    } else {
                        isWin = result.type === 'MERAH';
                    }
                } else if (bet.type === 'kecil') {
                    isWin = result.number <= 4;
                } else if (bet.type === 'besar') {
                    isWin = result.number >= 5;
                } else if (bet.type === 'nomor') {
                    isWin = bet.number === result.number;
                } else if (bet.type === 'kecil-merah') {
                    isWin = [0, 2, 4].includes(result.number);
                } else if (bet.type === 'kecil-hijau') {
                    isWin = [1, 3].includes(result.number);
                } else if (bet.type === 'besar-merah') {
                    isWin = [6, 8].includes(result.number);
                } else if (bet.type === 'besar-hijau') {
                    isWin = [5, 7, 9].includes(result.number);
                }
                
                if (isWin) {
                    bet.winAmount = Math.floor(bet.contractAmount * actualMultiplier);
                    bet.profit = bet.winAmount - bet.amount;
                    bet.status = 'win';
                    bet.result = `MENANG +${bet.winAmount.toLocaleString()}`;
                    
                    gameData.saldo += bet.winAmount;
                } else {
                    bet.winAmount = 0;
                    bet.profit = -bet.amount;
                    bet.status = 'lose';
                    bet.result = `KALAH -${bet.amount.toLocaleString()}`;
                }
                
                bet.resultNumber = result.number;
                bet.resultType = result.type;
                bet.resultSize = result.size;
                bet.processed = true;
                
                updateSaldo();
                
                if (document.querySelector('.history-tab.active')?.dataset.history === 'saya') {
                    updateMyBetHistory();
                }
            });
            
            gameData.pendingBets = gameData.pendingBets.filter(bet => 
                !relevantBets.some(rb => rb.id === bet.id)
            );
        }

        function showResultModal(mode, result) {
            document.getElementById('resultPeriod').textContent = result.period;
            document.getElementById('resultMode').textContent = mode.name;
            document.getElementById('resultNumber').textContent = result.number;
            
            let resultTypeText = `${result.type} - ${result.size}`;
            if (result.type === 'HIJAU') {
                resultTypeText = `<span style="color: #00b894">${resultTypeText}</span>`;
            } else if (result.type === 'UNGU') {
                resultTypeText = `<span style="color: #a29bfe">${resultTypeText}</span>`;
            } else {
                resultTypeText = `<span style="color: #e94560">${resultTypeText}</span>`;
            }
            document.getElementById('resultType').innerHTML = resultTypeText;
            
            const userBets = gameData.myBets.filter(bet => 
                bet.mode === result.mode && 
                bet.period === result.period
            );
            
            let betStatusHTML = '';
            if (userBets.length > 0) {
                userBets.forEach(bet => {
                    const isWin = bet.status === 'win';
                    betStatusHTML += `
                        <div style="margin: 10px 0; padding: 10px; background: ${isWin ? 'rgba(0, 184, 148, 0.2)' : 'rgba(233, 69, 96, 0.2)'}; border-radius: 5px; text-align: left;">
                            <div style="font-weight: bold; margin-bottom: 5px;">
                                ${getBetDisplayName(bet.type, bet.number)} 
                            </div>
                            <div style="margin-bottom: 3px; font-size: 12px; color: #8f9bb3;">
                                Taruhan: ${bet.amount.toLocaleString()}<br>
                                Kontrak: ${bet.contractAmount.toLocaleString()}
                            </div>
                            <div style="color: ${isWin ? '#00ff88' : '#ff4444'}; font-weight: bold;">
                                ${bet.result}
                            </div>
                        </div>
                    `;
                });
            } else {
                betStatusHTML = '<div style="margin: 10px 0; color: #8f9bb3;">Tidak ada taruhan pada periode ini</div>';
            }
            
            document.getElementById('resultBetStatus').innerHTML = betStatusHTML;
            document.getElementById('resultModal').style.display = 'flex';
        }

        function generateInitialHistory() {
            for (const modeKey in gameData.gameModes) {
                const mode = gameData.gameModes[modeKey];
                
                for (let i = 0; i < 10; i++) {
                    const periodNumber = (mode.periodNumber - i - 1 + 100) % 100;
                    const period = `${mode.periodPrefix}${periodNumber.toString().padStart(2, '0')}`;
                    const number = Math.floor(Math.random() * 10);
                    
                    let type = '';
                    let color = '';
                    
                    if (number === 0 || number === 5) {
                        type = 'UNGU';
                        color = 'ungu';
                    } else if (number % 2 === 1) {
                        type = 'HIJAU';
                        color = 'hijau';
                    } else {
                        type = 'MERAH';
                        color = 'merah';
                    }
                    
                    const size = number <= 4 ? 'KECIL' : 'BESAR';
                    
                    mode.history.push({
                        period: period,
                        number: number,
                        type: type,
                        size: size,
                        color: color,
                        mode: modeKey,
                        timestamp: new Date(Date.now() - i * mode.timer * 1000).toLocaleString('id-ID')
                    });
                }
            }
        }

        function updateResultHistory() {
            const historyBody = document.getElementById('historyBody');
            const mode = gameData.gameModes[gameData.currentMode];
            
            historyBody.innerHTML = '';
            
            mode.history.slice(0, 10).forEach(result => {
                const row = document.createElement('tr');
                
                const periodDisplay = result.period.slice(-2);
                
                let jenisText = result.size;
                let jenisClass = result.number <= 4 ? 'size-kecil' : 'size-besar';
                
                let statusIndicator = '';
                if (result.color === 'hijau') {
                    statusIndicator = `<span class="color-indicator">
                        <span class="color-dot dot-hijau"></span>
                        HIJAU
                    </span>`;
                } else if (result.color === 'ungu') {
                    statusIndicator = `<span class="color-indicator">
                        <span class="color-dot dot-ungu"></span>
                        UNGU
                    </span>`;
                } else {
                    statusIndicator = `<span class="color-indicator">
                        <span class="color-dot dot-merah"></span>
                        MERAH
                    </span>`;
                }
                
                row.innerHTML = `
                    <td>${periodDisplay}</td>
                    <td style="font-weight: bold; font-size: 16px;">${result.number}</td>
                    <td class="size-text ${jenisClass}">${jenisText}</td>
                    <td>${statusIndicator}</td>
                `;
                
                historyBody.appendChild(row);
            });
        }

        function updateMyBetHistory() {
            const historyBody = document.getElementById('historyBody');
            historyBody.innerHTML = '';
            
            const headers = document.querySelectorAll('.history-table th');
            headers[0].textContent = 'PERIODE';
            headers[1].textContent = 'JENIS';
            headers[2].textContent = 'JUMLAH';
            headers[3].textContent = 'HASIL';
            
            const modeBets = gameData.myBets.filter(bet => bet.mode === gameData.currentMode);
            
            modeBets.slice(0, 10).forEach(bet => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                let statusText = '';
                
                if (bet.status === 'waiting') {
                    statusClass = 'waiting';
                    statusText = 'MENUNGGU';
                } else if (bet.status === 'win') {
                    statusClass = 'profit';
                    statusText = bet.result;
                } else if (bet.status === 'lose') {
                    statusClass = 'loss';
                    statusText = bet.result;
                } else {
                    statusClass = '';
                    statusText = '-';
                }
                
                let betTypeDisplay = getBetDisplayName(bet.type, bet.number);
                if (bet.type === 'nomor') {
                    betTypeDisplay = `NOMOR ${bet.number}`;
                }
                
                const periodDisplay = bet.period.slice(-2);
                
                row.innerHTML = `
                    <td>${periodDisplay}</td>
                    <td>${betTypeDisplay}</td>
                    <td>${bet.amount.toLocaleString()}</td>
                    <td class="${statusClass}">${statusText}</td>
                `;
                
                historyBody.appendChild(row);
            });
            
            if (modeBets.length === 0) {
                historyBody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px; color: #8f9bb3;">
                            Belum ada taruhan pada mode ini
                        </td>
                    </tr>
                `;
            }
        }

        function switchHistoryTab(tabType) {
            document.querySelectorAll('.history-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.history-tab[data-history="${tabType}"]`).classList.add('active');
            
            const headers = document.querySelectorAll('.history-table th');
            
            if (tabType === 'hasil') {
                headers[0].textContent = 'PERIODE';
                headers[1].textContent = 'HASIL';
                headers[2].textContent = 'JENIS';
                headers[3].textContent = 'STATUS';
                updateResultHistory();
            } else if (tabType === 'saya') {
                updateMyBetHistory();
            }
        }

        function saveToLocalStorage() {
            localStorage.setItem('winGoGameData', JSON.stringify(gameData));
        }

        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('winGoGameData');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                
                gameData = {
                    ...gameData,
                    ...parsedData,
                    saldo: parsedData.saldo > 0 ? parsedData.saldo : 100000
                };
                
                for (const modeKey in gameData.gameModes) {
                    if (parsedData.gameModes && parsedData.gameModes[modeKey]) {
                        gameData.gameModes[modeKey] = {
                            ...gameData.gameModes[modeKey],
                            ...parsedData.gameModes[modeKey]
                        };
                    }
                }
                
                updateSaldo();
                updatePeriodDisplay();
                updateResultHistory();
                updateBettingButtonStatus();
                startTimers();
            }
        }

        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>